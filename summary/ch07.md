## **Ch 07. 웹을 안전하게 하는 HTTPS**

### **생각 공유**

**`@ChanhuiSeok`**

---

**`@jjangsungwon`** 
## 7장. 웹을 안전하게 하는 HTTPS

### HTTP 약점
#### 도청 가능
- HTTP를 사용한 리퀘스트나 리스폰스 통신 내용은 HTTP 자신을 암호화하는 기능이 없기 때문에 통신 전체가 암호화 되지 않음
- 따라서, 평문(암호화되지 않은 메시지)으로 HTTP 메시지를 보냄
- TCP/IP 는 통신 내용을 도청하기 쉬운 구조임. 패킷 수집(패킷 캡처, 스니퍼)하는 것만으로도 도청 가능. 

#### 위장 가능
- HTTP를 사용한 리퀘스트나 리스폰스에서는 통신 상대를 확인하지 않는다.
- 따라서, 누구나 리퀘스트, 리스폰스를 요청할 수 있다.
- SSL를 사용하면 상대를 확인할 수 있다. 증명서는 신뢰할 수 있는 기관에 의해 발행되는 것이기 때문에 서버나 클라이언트가 실재하는 사실을 증명한다.

#### 완전성 증명 불가능
- 완전성이란 정보의 정확성을 말한다.
- HTTP는 리퀘스트나 리스폰스가 발신된 후에 상대가 수신할 때까지의 사이에 변조된 내용을 파악할 수 없다.
- HTTP를 사용해서 완전성을 확인하기 위한 방법은 있지만, 확실하면서 편리한 방법은 아직 존재하지 않는다.
- SSL 다이제스트 기능을 사용하면 완전성 증명이 가능하다.
  - `Message Digest`: 메시지의 해시값(다이제스트 값)을 계산하여 데이터와 함께 전송. 중간에 패킷을 변조하더라도 다이제스트 값을 확인하면 데이터의 변조 사실을 확인할 수 있다. 

### 암호화
- 도청으로부터 정보를 지키기 위한 방법이 계속 연구되고 있다.

#### 통신 암호화
- HTTP는 SSL, TLS 와 같은 다른 프로토콜을 조합함으로써 HTTP 통신 내용을 암호화할 수 있다.
- SSL 등을 이용해 안전한 통신로를 확립하고 나서 그 통신로를 사용해 HTTP 통신을 수행한다.
- SSL을 조합한 HTTP를 HTTPS(HTTP Secure)나 HTTP over SSL 이라고 한다.

#### 콘텐츠 암호화
- 콘텐츠 내용 자체를 암호화하는 방법이다.
- HTTP에 암호화하는 기능이 없기 때문에 HTTP를 사용해서 운반하는 내용을 암호화화는 방법이다.
- 콘텐츠 암호화를 유용하게 사용하기 위해서는 클라이언트와 서버가 콘텐츠의 암호화나 복호화 구조를 가지고 있어야 한다.

### HTTPS = HTTP + 암호화 + 인증 + 완전성 보호
- HTTPS는 새로운 애플리케이션 계층의 프로토콜이 아니다. HTTP 통신을 하는 소켓 부분을 SSL이나 TLS 프로토콜로 대체하는 것이다.
- 보통 HTTP는 직접 TCP와 통신함. 하지만, SSL을 사용하면 HTTP - SSL - TCP 구조로 통신함

### 공통키 암호화
- 암호화와 복호화에 하나의 키를 같이 사용
- 공통키 암호화 방식을 사용하려면 상대방에게 키를 넘겨줘야함. 하지만, 키를 넘겨주는 과정에서 도청될 수 있음

### 공개키 암호화
- 공통키 암호화 방식의 단점을 해결하기 위해서 나옴
- 서로 다른 두 개의 키 페어(쌍)을 사용함
  - 비밀키: 누구에게도 알려지면 안되는 키
  - 공개키: 누구에게나 알려져도 괜찮은 키
- 암호를 푸는 비밀키를 통신으로 보낼 필요가 없기 때문에 도청에 의해서 키를 빼앗길 걱정이 없음
- 공개키 검증은 CA를 활용하면 됨

### HTTPS는 하이브리드 암호 시스템
- 공통키는 공개키보다 빠름
- 공개키는 도청 걱정이 없음
- HTTPS는 두개의 장점을 적절하게 혼합한 하이브리드 암호 시스템을 사용함
  - 공통키를 사용하기 위한 키 교환에 공개키를 사용. 그 후의 통신은 공통키 암호 사용
- 통신 구조는 책 참고 🙃

### SSL은 느리다?
- CPU나 메모리 등의 리소스를 다량으로 소비함으로써 처리가 느려짐 (암호화, 복호화, 추가적인 통신 ...)
- HTTP에 비해 2~100배 정도 림
- 느려지는 것에 대한 근본적인 해결 방법은 없다 -> 추후에 생기면 SSL도 역사속으로,,
- 현재 SSL 엑셀레이터라는 하드웨어를 사용해서 속도를 해결하고 있음 (SSL 처리하기 위한 전용 하드웨어)

##### +) HTTPS 를 사용하면 검색엔진 최적화에서 큰 혜택을 볼 수 있음. 구글에서는 HTTPS를 사용하는 웹사이트에 대해서 검색 순위 가산점을 주겠다고 발표했음
---

**`@qrlagusdn`** 

---
